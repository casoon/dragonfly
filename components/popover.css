/**
 * Popover-Komponente
 * 
 * Eine Komponente zur Erstellung von Popover-Elementen mit der nativen HTML Popover API.
 * Unterstützt Hover-Effekte, Animationen, Pfeile und Dark Mode.
 * 
 * @nutzung
 * <button popovertarget="myPopover">Follow Me</button>
 * <div id="myPopover" popover class="popover">Thank you for following me!</div>
 * 
 * @eigenschaften
 * - Automatische Positionierung unter dem Trigger-Element
 * - Smooth Animation beim Öffnen/Schließen mit @starting-style
 * - Pfeil-Element für visuelle Verbindung zum Trigger
 * - Responsive Design (max-width: 90vw)
 * - Unterstützung für Light/Dark Mode
 * 
 * @browser-kompatibilität
 * Die native HTML Popover API wird unterstützt in:
 * - Chrome/Edge ab Version 114
 * - Safari ab Version 16.4
 * - Firefox ab Version 114 (mit Aktivierung über Flag)
 * 
 * Für ältere Browser sollte ein Fallback-Mechanismus implementiert werden,
 * z.B. mit JavaScript-basierten Popover-Lösungen.
 */

@layer popover {
  .popover {
    position: absolute;
    z-index: 1000;
    min-width: 200px;
    max-width: 90vw;
    padding: 1rem;
    border-radius: 0.5rem;
    background: var(--color-background, #fff);
    color: var(--color-text, #222);
    box-shadow: 0 8px 32px rgb(0 0 0 / 18%), 0 1.5px 4px rgb(0 0 0 / 8%);
    border: 1px solid var(--color-border, #e5e7eb);
    animation: popover-enter var(--animation-duration-normal, 300ms) cubic-bezier(0.68, -0.6, 0.32, 1.6) forwards;
  }
  
  @starting-style {
    .popover {
      opacity: 0;
      transform: translateY(8px) scale(0.98);
    }
  }

  .popover[popover] {
    /* Ermöglicht Styling für native Popover-API */
    inset: unset;
    top: 100%;
    left: 0;
    margin-top: 0.5rem;
    display: block;
  }

  /* Optional: Arrow */
  .popover::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 2rem;
    width: 16px;
    height: 8px;
    clip-path: polygon(50% 0, 0 100%, 100% 100%);
    background: var(--color-background, #fff);
    border-left: 1px solid var(--color-border, #e5e7eb);
    border-top: 1px solid var(--color-border, #e5e7eb);
    z-index: 1;
  }

  /* Darkmode Support */
  @media (prefers-color-scheme: dark) {
    .popover {
      background: var(--color-background-dark, #222);
      color: var(--color-text-dark, #fff);
      border-color: var(--color-border-dark, #444);
    }

    .popover::before {
      background: var(--color-background-dark, #222);
      border-color: var(--color-border-dark, #444);
    }
  }
} 