/**
 * Footer Components
 * 
 * Flexible footer system with multiple layout types and utility classes.
 * Uses CSS Nesting and Container Queries for modern responsive design.
 * 
 * @layer: components
 * 
 * Footer Types:
 * - .footer-simple: Basic single-row footer
 * - .footer-columns: Multi-column layout
 * - .footer-stacked: Vertical stacking
 * - .footer-split: Left/right split layout
 * - .footer-minimal: Minimal single-line footer
 * 
 * Utility Classes:
 * - .center, .left, .right: Text alignment
 * - .cols-2, .cols-3, .cols-4: Column count
 * - .theme-dark, .theme-primary, .theme-minimal: Color themes
 * - .compact, .spacious: Spacing variants
 * 
 * Container Queries:
 * - Responsive column collapsing
 * - Mobile-first approach
 * - Automatic layout adjustments
 */

@import url('./footer-tokens.css');

@layer components {
  /* Base footer container */
  .footer {
    background-color: var(--footer-bg);
    color: var(--footer-text);
    container-type: inline-size;
    font-size: var(--footer-font-size);
    line-height: var(--footer-line-height);
    padding: var(--footer-padding);
    width: 100%;
    
    /* Footer content wrapper */
    & .footer-content {
      margin: 0 auto;
      max-width: var(--footer-max-width);
      width: 100%;
    }
    
    /* Typography */
    & h1, & h2, & h3, & h4, & h5, & h6 {
      color: var(--footer-heading);
      font-size: var(--footer-heading-size);
      font-weight: var(--footer-heading-weight);
      margin: 0 0 var(--footer-section-gap) 0;
    }
    
    & p {
      margin: 0 0 var(--space-3) 0;
      
      &:last-child {
        margin-bottom: 0;
      }
    }
    
    /* Links */
    & a {
      color: var(--footer-link);
      font-weight: var(--footer-link-weight);
      text-decoration: none;
      transition: color 01.2s ease;
      
      &:hover,
      &:focus {
        color: var(--footer-link-hover);
        text-decoration: underline;
      }
      
      &:focus {
        outline: 2px solid var(--footer-link);
        outline-offset: 2px;
      }
    }
    
    /* Lists */
    & ul, & ol {
      list-style: none;
      margin: 0;
      padding: 0;
      
      & li {
        margin-bottom: var(--space-2);
        
        &:last-child {
          margin-bottom: 0;
        }
      }
    }
    
    /* Navigation */
    & nav {
      & ul {
        display: flex;
        flex-direction: column;
        gap: var(--space-2);
        
        & li {
          margin-bottom: 0;
        }
      }
    }
    
    /* Utility modifiers */
    &.compact {
      padding: var(--footer-padding-compact);
      
      & .footer-content {
        gap: var(--footer-gap-compact);
      }
    }
    
    &.spacious {
      padding: var(--footer-padding-spacious);
      
      & .footer-content {
        gap: var(--footer-gap-spacious);
      }
    }
    
    /* Text alignment utilities */
    &.center {
      text-align: center;
      
      & nav ul {
        align-items: center;
        justify-content: center;
      }
    }
    
    &.left {
      text-align: left;
      
      & nav ul {
        align-items: flex-start;
        justify-content: flex-start;
      }
    }
    
    &.right {
      text-align: right;
      
      & nav ul {
        align-items: flex-end;
        justify-content: flex-end;
      }
    }
  }
  
  /* Footer Type: Simple */
  .footer-simple {
    & .footer-content {
      align-items: center;
      display: flex;
      flex-wrap: wrap;
      gap: var(--footer-gap);
      justify-content: space-between;
      
      /* Container query for responsive behavior */
      @container (width <= 768px) {
        flex-direction: column;
        gap: var(--footer-gap-compact);
        text-align: center;
      }
    }
    
    & nav ul {
      flex-direction: row;
      gap: var(--space-4);
      
      @container (width <= 768px) {
        flex-direction: column;
        gap: var(--space-2);
      }
    }
  }
  
  /* Footer Type: Columns */
  .footer-columns {
    & .footer-content {
      display: grid;
      gap: var(--footer-column-gap);
      grid-template-columns: repeat(var(--footer-columns), 1fr);
      
      /* Container queries for responsive columns */
      @container (width <= 1024px) {
        grid-template-columns: repeat(2, 1fr);
      }
      
      @container (width <= 768px) {
        gap: var(--footer-gap);
        grid-template-columns: 1fr;
      }
    }
    
    /* Column count utilities */
    &.cols-2 {
      --footer-columns: 2;
      
      @container (width <= 768px) {
        & .footer-content {
          grid-template-columns: 1fr;
        }
      }
    }
    
    &.cols-3 {
      --footer-columns: 3;
      
      @container (width <= 1024px) {
        & .footer-content {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      
      @container (width <= 768px) {
        & .footer-content {
          grid-template-columns: 1fr;
        }
      }
    }
    
    &.cols-4 {
      --footer-columns: 4;
      
      @container (width <= 1200px) {
        & .footer-content {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      
      @container (width <= 768px) {
        & .footer-content {
          grid-template-columns: 1fr;
        }
      }
    }
    
    /* Column sections */
    & section {
      & h4 {
        border-bottom: 1px solid var(--footer-border);
        margin-bottom: var(--space-3);
        padding-bottom: var(--space-2);
      }
    }
  }
  
  /* Footer Type: Stacked */
  .footer-stacked {
    & .footer-content {
      display: flex;
      flex-direction: column;
      gap: var(--footer-gap);
      text-align: center;
      
      & > * {
        border-bottom: 1px solid var(--footer-border);
        padding-bottom: var(--footer-section-gap);
        
        &:last-child {
          border-bottom: none;
          padding-bottom: 0;
        }
      }
    }
    
    & nav ul {
      flex-flow: row wrap;
      gap: var(--space-4);
      justify-content: center;
      
      @container (width <= 768px) {
        flex-direction: column;
        gap: var(--space-2);
      }
    }
  }
  
  /* Footer Type: Split */
  .footer-split {
    & .footer-content {
      align-items: center;
      display: grid;
      gap: var(--footer-gap);
      grid-template-columns: 1fr auto;
      
      @container (width <= 768px) {
        gap: var(--footer-gap-compact);
        grid-template-columns: 1fr;
        text-align: center;
      }
    }
    
    & .footer-left {
      justify-self: start;
      
      @container (width <= 768px) {
        justify-self: center;
      }
    }
    
    & .footer-right {
      justify-self: end;
      
      @container (width <= 768px) {
        justify-self: center;
      }
    }
    
    & nav ul {
      flex-direction: row;
      gap: var(--space-4);
      
      @container (width <= 768px) {
        flex-direction: column;
        gap: var(--space-2);
      }
    }
  }
  
  /* Footer Type: Minimal */
  .footer-minimal {
    border-top: 1px solid var(--footer-border);
    padding: var(--space-4) var(--footer-padding);
    
    & .footer-content {
      align-items: center;
      display: flex;
      font-size: var(--text-xs);
      gap: var(--space-4);
      justify-content: center;
      
      @container (width <= 768px) {
        flex-direction: column;
        gap: var(--space-2);
      }
    }
    
    & nav ul {
      flex-direction: row;
      gap: var(--space-3);
      
      @container (width <= 768px) {
        flex-direction: column;
        gap: var(--space-1);
      }
    }
  }
  
  /* Theme variants */
  .footer {
    &.theme-dark {
      background-color: var(--color-neutral-900);
      color: var(--color-neutral-300);
      
      & h1, & h2, & h3, & h4, & h5, & h6 {
        color: var(--color-neutral-100);
      }
      
      & a {
        color: var(--color-primary-400);
        
        &:hover,
        &:focus {
          color: var(--color-primary-300);
        }
      }
      
      & .footer-content section h4 {
        border-bottom-color: var(--color-neutral-700);
      }
      
      &.footer-minimal {
        border-top-color: var(--color-neutral-700);
      }
      
      & .footer-stacked .footer-content > * {
        border-bottom-color: var(--color-neutral-700);
      }
    }
    
    &.theme-primary {
      background-color: var(--color-primary-900);
      color: var(--color-primary-100);
      
      & h1, & h2, & h3, & h4, & h5, & h6 {
        color: var(--color-white);
      }
      
      & a {
        color: var(--color-primary-200);
        
        &:hover,
        &:focus {
          color: var(--color-white);
        }
      }
      
      & .footer-content section h4 {
        border-bottom-color: var(--color-primary-700);
      }
      
      &.footer-minimal {
        border-top-color: var(--color-primary-700);
      }
      
      & .footer-stacked .footer-content > * {
        border-bottom-color: var(--color-primary-700);
      }
    }
    
    &.theme-minimal {
      background-color: transparent;
      color: var(--color-neutral-600);
      
      & h1, & h2, & h3, & h4, & h5, & h6 {
        color: var(--color-neutral-800);
      }
      
      & a {
        color: var(--color-neutral-700);
        
        &:hover,
        &:focus {
          color: var(--color-neutral-900);
        }
      }
      
      & .footer-content section h4 {
        border-bottom-color: var(--color-neutral-300);
      }
      
      &.footer-minimal {
        border-top-color: var(--color-neutral-300);
      }
      
      & .footer-stacked .footer-content > * {
        border-bottom-color: var(--color-neutral-300);
      }
    }
  }
  
  /* Fallback media queries for browsers without container query support */
  @supports not (container-type: inline-size) {
    @media (width <= 1200px) {
      .footer-columns.cols-4 .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (width <= 1024px) {
      .footer-columns .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .footer-columns.cols-3 .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (width <= 768px) {
      .footer-simple .footer-content {
        flex-direction: column;
        gap: var(--footer-gap-compact);
        text-align: center;
      }
      
      .footer-simple nav ul,
      .footer-stacked nav ul,
      .footer-split nav ul,
      .footer-minimal nav ul {
        flex-direction: column;
        gap: var(--space-2);
      }
      
      .footer-columns .footer-content,
      .footer-columns.cols-2 .footer-content,
      .footer-columns.cols-3 .footer-content,
      .footer-columns.cols-4 .footer-content {
        gap: var(--footer-gap);
        grid-template-columns: 1fr;
      }
      
      .footer-split .footer-content {
        gap: var(--footer-gap-compact);
        grid-template-columns: 1fr;
        text-align: center;
      }
      
      .footer-split .footer-left,
      .footer-split .footer-right {
        justify-self: center;
      }
      
      .footer-minimal .footer-content {
        flex-direction: column;
        gap: var(--space-2);
      }
    }
  }
  
  /* Print styles */
  @media print {
    .footer {
      background: none !important;
      border-top: 1px solid #000;
      color: #000 !important;
      page-break-inside: avoid;
      
      & a {
        color: #000 !important;
        text-decoration: underline;
      }
      
      & .footer-content {
        display: block !important;
        
        & > * {
          margin-bottom: var(--space-4);
        }
      }
    }
  }
  
  /* High contrast mode */
  @media (prefers-contrast: more) {
    .footer {
      border: 1px solid;
      
      & a {
        text-decoration: underline;
      }
      
      & .footer-content section h4 {
        border-bottom: 2px solid;
      }
    }
  }
  
  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .footer {
      & a {
        transition: none;
      }
    }
  }
} 